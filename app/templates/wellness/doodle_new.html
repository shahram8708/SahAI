{% extends "base.html" %}
{% set page_title = "Mood Doodle" %}
{% block content %}
<main id="main-content" class="container py-4 fade-in">
  <div class="row">
    <div class="col-lg-8">
      <div class="card rounded-4 shadow-sm">
        <div class="card-body">
          <h1 class="h5 mb-3"><i class="bi bi-brush text-success me-2"></i>Mood Doodle</h1>
          <p class="text-muted">Draw how you feel. We’ll offer a gentle interpretation—no judgment.</p>

          <div class="canvas-wrap">
            <canvas id="doodleCanvas" width="800" height="480" aria-label="Doodle canvas"></canvas>
            <div class="toolbar mt-2 d-flex gap-2 align-items-center">
              <label class="form-label m-0">Brush</label>
              <input type="range" min="1" max="20" value="5" id="brushSize" class="form-range" style="width:140px;">
              <input type="color" id="brushColor" value="#2e7d57" class="form-control form-control-color">
              <button class="btn btn-outline-secondary btn-sm rounded-pill" id="undoBtn"><i class="bi bi-arrow-counterclockwise"></i> Undo</button>
              <button class="btn btn-outline-secondary btn-sm rounded-pill" id="clearBtn"><i class="bi bi-eraser"></i> Clear</button>
            </div>
          </div>

          <form method="POST" class="mt-3">
            {{ form.csrf_token }}
            {{ form.image_data(id="image_data") }}
            {{ form.submit(class_="btn btn-success rounded-pill") }}
            <div class="form-text mt-2">Images are private and stored securely (≤ 1MB).</div>
          </form>
        </div>
      </div>
    </div>

    <div class="col-lg-4">
      <div class="alert alert-info rounded-3">
        <i class="bi bi-shield-lock me-2"></i> We never log images. Only the file path is stored.
      </div>
    </div>
  </div>
</main>
<script src="{{ url_for('static', filename='js/doodle_canvas.js') }}"></script>
{% endblock %}
